{% extends "layout.jinja" %}

{% block page_header %}
  <title>Post List - Azu App</title>
  <meta name="description" content="Create a new post in your Azu application">
{% endblock %}

{% block page_body %}
<div class="container py-4">
  <!-- Page Header -->
  <div class="row mb-4">
    <div class="col-12">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="/posts" class="text-decoration-none">
              <i class="bi bi-house me-1"></i>
              Posts
            </a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            <i class="bi bi-plus-circle me-1"></i>
            New Post
          </li>
        </ol>
      </nav>

      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h3 mb-0 text-white">
            <i class="bi bi-plus-circle me-2"></i>
            Post List
          </h1>
          <p class="text-muted mb-0">Fill out the form below to create a new post</p>
        </div>
        <div>
          <a href="/posts" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>
            Back to List
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Form Card -->
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card  border-secondary">
        <div class="card-header  border-secondary">
          <h5 class="mb-0 text-white">
            <i class="bi bi-pencil-square me-2"></i>
            Post Information
          </h5>
        </div>
        <div class="card-body">
          <form action="/posts" method="POST" class="needs-validation" novalidate>
            <!-- CSRF Token -->
            <input type="hidden" name="_token" value="{{ csrf_token }}">

            <!-- Form Fields -->
            
              
              <div class="mb-3">
                <label for="name" class="form-label text-white">
                  Name
                  
                    <span class="text-danger">*</span>
                  
                </label>

                
                  <input
                    type="text"
                    class="form-control  text-white border-secondary"
                    id="name"
                    name="name"
                    placeholder="Enter name"
                    value="{% if form %}{{ form.name }}{% endif %}"
                    required
                  >
                

                <div class="invalid-feedback">
                  Please provide a valid name.
                </div>

                <!-- Field-specific help text -->
                
              </div>
            
              
              <div class="mb-3">
                <label for="content" class="form-label text-white">
                  Content
                  
                    <span class="text-danger">*</span>
                  
                </label>

                
                  <textarea
                    class="form-control  text-white border-secondary"
                    id="content"
                    name="content"
                    rows="4"
                    placeholder="Enter content"
                    required
                  >{% if form %}{{ form.content }}{% endif %}</textarea>
                

                <div class="invalid-feedback">
                  Please provide a valid content.
                </div>

                <!-- Field-specific help text -->
                
              </div>
            

            <!-- Form Actions -->
            <div class="d-flex justify-content-between align-items-center pt-3 border-top border-secondary">
              <div>
                <button type="button" class="btn btn-outline-secondary" onclick="resetForm()">
                  <i class="bi bi-arrow-clockwise me-2"></i>
                  Reset Form
                </button>
              </div>
              <div class="btn-group" role="group">
                <a href="/posts" class="btn btn-outline-secondary">
                  <i class="bi bi-x-circle me-2"></i>
                  Cancel
                </a>
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-check-circle me-2"></i>
                  Create Post
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Help Card -->
      <div class="card  border-secondary mt-4">
        <div class="card-header  border-secondary">
          <h6 class="mb-0 text-white">
            <i class="bi bi-question-circle me-2"></i>
            Need Help?
          </h6>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <h6 class="text-white">Form Tips:</h6>
              <ul class="text-muted small">
                <li>Fields marked with <span class="text-danger">*</span> are required</li>
                <li>Use descriptive, meaningful values</li>
                <li>Check your input before submitting</li>
              </ul>
            </div>
            <div class="col-md-6">
              <h6 class="text-white">Keyboard Shortcuts:</h6>
              <ul class="text-muted small">
                <li><kbd>Ctrl</kbd> + <kbd>S</kbd> - Save form</li>
                <li><kbd>Ctrl</kbd> + <kbd>R</kbd> - Reset form</li>
                <li><kbd>Esc</kbd> - Cancel and go back</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Form validation
(function() {
  'use strict';
  window.addEventListener('load', function() {
    var forms = document.getElementsByClassName('needs-validation');
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();

// Reset form functionality
function resetForm() {
  if (confirm('Are you sure you want to reset the form? All entered data will be lost.')) {
    document.querySelector('form').reset();
    document.querySelector('form').classList.remove('was-validated');
  }
}

// Keyboard shortcuts
document.addEventListener('keydown', function(e) {
  if (e.ctrlKey && e.key === 's') {
    e.preventDefault();
    document.querySelector('button[type="submit"]').click();
  } else if (e.ctrlKey && e.key === 'r') {
    e.preventDefault();
    resetForm();
  } else if (e.key === 'Escape') {
    window.location.href = '/posts';
  }
});

// Auto-save functionality (optional)
let autoSaveTimer;
const form = document.querySelector('form');
const inputs = form.querySelectorAll('input, textarea, select');

inputs.forEach(input => {
  input.addEventListener('input', function() {
    clearTimeout(autoSaveTimer);
    autoSaveTimer = setTimeout(() => {
      // Auto-save logic could be implemented here
      console.log('Auto-saving form data...');
    }, 2000);
  });
});
</script>
{% endblock %}
